    <style type="text/css">
    	.font-12 {
    		font-size: 12px;
    	}

    	.font-24 {
    		font-size: 24px;
    	}

    	.b {
    		font-weight: bold;
    	}

    	.shop-btn {
    		position: absolute;
    		right: 0;
    		bottom: 28px;
    		font-size: 12px;
    		font-weight: bold;
    		margin-right: 0;
    		border-bottom-left-radius: 5px;
    		border-top-left-radius: 5px;
    		border-bottom-right-radius: 0;
    		border-top-right-radius: 0;
    	}

    	.category {
    		border-top-left-radius: 8px;
    		border-top-right-radius: 8px;
    		width: 100px;
    		margin: 0px 15px;
    		background: none;
			border: none;
    	}
		.category:hover {
			box-shadow: 0 1rem 3rem rgba(0,0,0,.175) !important;
		}
    	.m20 {
    		margin: 20px;
    	}

    	.m15 {
    		margin: 15px;
    	}

    	.banner {
    		height: 400px;
    		/*background-image: url("/images/banner.png");*/
    	}
    	.profile-preview{
			border: 6px solid white;
			position: absolute;
			bottom: -80px;
			left: 75px;
			width: 180px;
			height: 180px;
    	}
    	.h350{
    		height: 350px;
    	}
    	.name-container{
			padding-left: 80px;
			margin-top: 25px;
    	}
    	.text-center-container{
    		width: 160px;
    		margin: 0 auto;
    	}
    	.text-center-container > p{
	    	font-size: 12px;
			color: #888;
			text-align: center;
    	}
    	.item-parent{
    		padding-top: 25px;
    	}
		.item-card {
			position: relative;
			width: 160px;
			display: inline-block;
		}
		.item-card:hover {
			box-shadow: 0 1rem 3rem rgba(0,0,0,.175) !important;
		}
		.card-title{
		
		}
		.card-text{
			height: 35px;
			word-wrap: break-word;
			overflow: hidden;
			font-size: 10px;
		}
		.cart-items{
			max-height: 500px;
			overflow-y: auto;
			margin-bottom: 15px;
		}
		.price-text-muted{
			color: #9f9595;
			text-decoration: line-through;
			z-index: -1;
			position: absolute;
			top: 18px;
			font-size: 10px;
		}
    </style>

<br>
<div class="container-fluid">
	<div class="banner fluid shadow rounded position-relative h350">
		<img src="/images/sqrimg250.png"
			class="profile-preview shadow rounded-circle bg-white">
	</div>
</div>
<br>
<br>
<br>
<div class="container">
	<div class="name-container">
		<h2 class="font-24 b shop-name">Shop Name</h2>
		<hr>
		<p class="shop-desc">Lorem Ipsum | is simply dummy | the printing</p>
	</div>

	<section>
		<div class="text-center-container">
			<h1 class="text-center">Menu</h1>
			<hr class="m-0">
			<p class="">See what we have to offer you</p>
		</div>
		<div class="row mb-3">
			<div class="col-md-12">
				<div class="categories-parent d-flex flex-wrap mr-4"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-9 item-parent">
			</div>
			<div class="col-md-3">
				<h6 class="b">SHOPPING CART</h6>
				<hr>
				<div class="cart-items"></div>
				<hr>
				<p class="d-flex justify-content-between"><small class="">Sub Total:</small><small id="subTotalAmtLbl" class="">TK 0</small></p>
				<p class="d-flex justify-content-between"><small class="">Vat Total:</small><small id="vatTotalAmtLbl" class="">TK 0</small></p>
				<p class="d-flex justify-content-between"><small class="b">Total:</small><small id="totalAmtLbl" class="b">TK 0</small></p>
				<button class="btn btn-warning w-100" id="checkout"><small class="b">CHECKOUT</small></button>
			</div>
		</div>
	</section>
</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

<script>
	var shop = window.localStorage.getItem("genericfosshop")
	if (shop !== null) {
		shop = JSON.parse(shop);
		
		if (shop.imageCover != null) {
			$(".banner").css('background-image',
					'url(' + shop.imageCover + ')');
		}
		$(".shop-name").text(shop.firstname + " " + shop.lastname);
		$(".shop-desc").text(shop.description);
		$(".profile-preview").prop("src", shop.image);
		
		var request = $.ajax({
			url: root + "/api/generics/byshop",
			type: "POST",
			data: JSON.stringify({
				shop: shop.id,
			}),
			headers: {
				'Accept': 'application/json',
				'Content-Type': 'application/json',
			},
		});

		request.done(function (data) {
			for (var i = 0; i < data.length; i++) {
				var category = data[i];
				if(category.status == "false")
				{
					var html = "<button class='category rounded' onclick='getItems("+ JSON.stringify(category.name) +")'>"
								+ '<img src=' + category.image + ' class="card-img-top w90" alt="...">'
								+ '<div class="card-body p-0">'
								+ '<p class="card-title text-center font-12 b">' + category.name.toUpperCase()
								+ '</p>' + '</div>' + '</button>';

					$(".categories-parent").append(html);
				}
			}
			$(".categories-parent").children(":first").click();
		});

		request.fail(function (jqXHR, textStatus) {
			alert("Request failed: " + textStatus);
		});
		
		
		
		function getItems(categoryName){
			
			var request = $.ajax({
				url: root + "/api/items/bycategory",
				type: "POST",
				data: JSON.stringify({
					shop: shop.id,
					category: categoryName,
				}),
				headers: {
					'Accept': 'application/json',
					'Content-Type': 'application/json',
				},
			});

			request.done(function (data) {
				$(".item-parent").html("");
				for (var i = 0; i < data.length; i++) {
					var item = data[i];
					var discPrice = item.price * item.discountRate / 100;
					var discPriceElement = discPrice == 0 ? "" : "<small class='card-title mb-0 b text-danger'>TK " + (item.price - discPrice) + "</small>";
					var textColor = discPrice > 0 ? "price-text-muted" : "text-danger"; 
					var priceElement = "<small class='card-title mb-0 b " + textColor + "'>TK " + item.price + "</small>";
					if(item.status == "false")
					{
						var html = '<div class="item-card shadow rounded m20">' +
									'<img src=' + getImage(item.image, "/images/sqrimg250.png") + ' class="card-img-top w160" alt="...">' +
									'<div class="card-body">' +
									'<small class="card-title b">' + item.name + '</small>' +
									'<p class="card-text font-12" data-toggle="tooltip" data-placement="top" title="' + item.detail + '">' + item.detail + '</p>' +
									"<div class='d-flex justify-content-between align-items-center position-relative'>"+ priceElement + discPriceElement +"<button class='btn badge badge-warning add-to-cart-btn' onclick='setToCart("+ JSON.stringify(item) +")'><i class='fa-solid fa-basket-shopping'></i></button></div>" +
									'</div>' +
									'</div>';

						$(".item-parent").append(html);
					}
				}
				
			});

			request.fail(function (jqXHR, textStatus) {
				alert("Request failed: " + textStatus);
			});
		}
		
		
		var subTotalAmt = 0;
		var vatTotalAmt = 0;
		var itemsCookie = [];
		function setToCart(item){ 
			var disc = item.discountRate * item.price / 100;
			var price = item.price - disc;
			
			var itemElement = $(".cart-items").find(".cart-item-"+item.id);
console.log("itemElement.length "+itemElement.length);
			if(itemElement.length > 0){
				var qty = parseInt($(itemElement).find(".qty").text());
				qty += 1;
				$(itemElement).find(".qty").text(qty);
				
				var totPrice = price * qty;
				$(itemElement).find(".price").text(totPrice);
			}else{

				var hr = $(".cart-items").children().length > 0 ? '<hr>': "";
				var html = '<div class="cart-item cart-item-'+ item.id +'">'+
								hr +
								'<input type="hidden" class="item-id" value="'+ item.id +'">'+
								'<div class="d-flex align-items-center">'+
									'<img src="' + item.image + '" class="w50">'+
									'<div class="d-flex justify-content-between ml-4 w-100">'+
										'<div>'+
											'<p class="mb-0 card-title b">' + item.name + '</p>'+
											'<small class="card-title mb-0 b text-danger"><small class="qty"> 1 </small> x <small class="price"> ' + price + ' </small></small>'+
									'</div>'+
										'<button class="btn cart-itm-close">'+
											'<i class="fa-solid fa-xmark"></i>'+
										'</button>'+
									'</div>'+
								'</div>'+
							'</div>';
				$(".cart-items").append(html);
			}

			
			subTotalAmt += price;
			console.log(subTotalAmt);
			$("#subTotalAmtLbl").text("TK "+subTotalAmt);

			var vat = item.vatRate * item.price / 100;
			vatTotalAmt += vat;
			$("#vatTotalAmtLbl").text("TK "+vatTotalAmt);
			
			var totalAmt = subTotalAmt + vatTotalAmt;
		    $("#totalAmtLbl").text("TK "+totalAmt);
			console.log("price "+price);
		    //item.price = price;
			itemsCookie[itemsCookie.length] = item;
			
			window.localStorage.setItem("genericfoscart"+shop.id, JSON.stringify(itemsCookie));
		}
		
		// set from local storage
		var cartItems = window.localStorage.getItem("genericfoscart"+shop.id);
		
		if (cartItems !== null) {
			cartItems = JSON.parse(cartItems);
			for (var i = 0; i < cartItems.length; i++) {
				setToCart(cartItems[i]);
			}
		}
		
		$(".cart-items").on("click", ".cart-item", function(){
			$(this).closest(".cart-item").remove();
			//window.localStorage.getItem("genericfoscart");
			var newItemsCookie = [];
			var id = parseInt($(this).find(".item-id").val());
			console.log("id "+id);
			for (var i = 0; i < itemsCookie.length; i++) {
				if(itemsCookie[i].id !== id){
					newItemsCookie[newItemsCookie.length] = itemsCookie[i];
				}
				else{
					var disc = itemsCookie[i].discountRate * itemsCookie[i].price / 100;
					var price = itemsCookie[i].price - disc;
					//console.log(price);
					//console.log(subTotalAmt);
					subTotalAmt-=price;
					
					var vat = itemsCookie[i].vatRate * itemsCookie[i].price / 100;
					vatTotalAmt -= vat;
				}
			}
			//window.localStorage.removeItem("genericfoscart");
			window.localStorage.setItem("genericfoscart"+shop.id, JSON.stringify(newItemsCookie));
			$("#subTotalAmtLbl").text("TK "+subTotalAmt);
			$("#vatTotalAmtLbl").text("TK "+vatTotalAmt);
			var totalAmt = subTotalAmt + vatTotalAmt;
		    $("#totalAmtLbl").text("TK "+totalAmt);
		})
		
		$("#checkout").click(function(){
			if (userDetails !== null) {
				$("#contents").load("/pages/checkout.html");
				window.localStorage.setItem("genericfospage", "checkout");
				scrollToTop();
			}
			else{
				alert("You have to log in first.");
				$("#contents").load("/pages/login.html");
				window.localStorage.setItem("genericfospage", "login");
				scrollToTop();
			}
		});
		
	}



</script>